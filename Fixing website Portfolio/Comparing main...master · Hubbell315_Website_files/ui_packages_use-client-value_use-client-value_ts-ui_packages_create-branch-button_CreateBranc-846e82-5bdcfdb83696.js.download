"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_use-client-value_use-client-value_ts-ui_packages_create-branch-button_CreateBranc-846e82"],{55910:(e,t,r)=>{r.d(t,{O:()=>i,S:()=>o});var n=r(47584);let a=n.cg?.document?.head?.querySelector('meta[name="release"]')?.content||"",o="X-GitHub-Client-Version";function i(){return a}},76797:(e,t,r)=>{r.d(t,{D:()=>n});function n(e){if("clipboard"in navigator)return navigator.clipboard.writeText(e);let t=document.body;if(!t)return Promise.reject(Error());let r=function(e){let t=document.createElement("pre");return t.style.width="1px",t.style.height="1px",t.style.position="fixed",t.style.top="5px",t.textContent=e,t}(e);return t.appendChild(r),!function(e){if("clipboard"in navigator)return navigator.clipboard.writeText(e.textContent||"");let t=getSelection();if(null==t)return Promise.reject(Error());t.removeAllRanges();let r=document.createRange();r.selectNodeContents(e),t.addRange(r),document.execCommand("copy"),t.removeAllRanges(),Promise.resolve()}(r),t.removeChild(r),Promise.resolve()}},55156:(e,t,r)=>{r.d(t,{jC:()=>l,kt:()=>i,tV:()=>s});var n=r(55910),a=r(75632),o=r(93108);function i(e){let t={"X-Requested-With":"XMLHttpRequest",...(0,o.wE)(e)};return(0,a.G7)("client_version_header")&&(t={...t,[n.S]:(0,n.O)()}),t}function s(e,t){for(let[r,n]of Object.entries(i(t)))e.set(r,n)}function l(e){if((0,a.G7)("send_app_type_header"))return{"X-GitHub-App-Type":e}}},93108:(e,t,r)=>{r.d(t,{$r:()=>i,M1:()=>s,li:()=>a,pS:()=>c,wE:()=>l});var n=r(47584);let a="X-Fetch-Nonce",o=new Set;function i(e){o.add(e)}function s(){return o.values().next().value||""}function l(e){let t={};return void 0!==e&&(t["X-Fetch-Nonce-To-Validate"]=e),void 0===e?t[a]=s():o.has(e)?t[a]=e:t[a]=Array.from(o).join(","),t}function c(){let e=n.XC?.head?.querySelector('meta[name="fetch-nonce"]')?.content||"";e&&i(e)}},94232:(e,t,r)=>{r.d(t,{I:()=>i});var n=r(96540),a=r(38568),o=r(18347);function i(e,t,r=[]){let s=(0,n.useCallback)(e,r),l=(0,o.BP)(),c=(0,n.useRef)(l===o.O8.ClientRender),[d,u]=(0,n.useState)(()=>l===o.O8.ClientRender?s():t),h=(0,n.useCallback)(()=>{u(s)},[s]);return(0,a.N)(()=>{c.current||u(s),c.current=!1},[s,...r]),[d,h]}},57572:(e,t,r)=>{r.d(t,{DI:()=>a,QJ:()=>i,Sr:()=>s,lS:()=>o});var n=r(55156);function a(e,t={}){!function(e){if(new URL(e,window.location.origin).origin!==window.location.origin)throw Error("Can not make cross-origin requests from verifiedFetch")}(e);let r=function(e){let t=new URL(e,window.location.href),r=new URL(window.location.href,window.location.origin),n=r.searchParams.get("_features");n&&!t.searchParams.has("_features")&&t.searchParams.set("_features",n);let a=r.searchParams.get("_tracing");return a&&!t.searchParams.has("_tracing")&&t.searchParams.set("_tracing",a),e.startsWith(window.location.origin)?t.href:`${t.pathname}${t.search}`}(e),o={...t.headers,"GitHub-Verified-Fetch":"true",...(0,n.kt)()};return fetch(r,{...t,headers:o})}function o(e,t){let r={...t?.headers??{},Accept:"application/json","Content-Type":"application/json"},n=t?.body?JSON.stringify(t.body):void 0;return a(e,{...t,body:n,headers:r})}function i(e,t={}){let r={...t.headers,"GitHub-Is-React":"true"};return a(e,{...t,headers:r})}function s(e,t){let r={...t?.headers??{},"GitHub-Is-React":"true"};return o(e,{...t,headers:r})}},26514:(e,t,r)=>{r.d(t,{T:()=>p});var n=r(74848),a=r(45996),o=r(38621),i=r(87330),s=r(96540),l=r(34164),c=r(42522),d=r(13080),u=r(76797);let h={tooltip:"CopyToClipboardButton-module__tooltip--Dq1IB"};function p({icon:e=o.CopyIcon,size:t="medium",onCopy:r,textToCopy:p,tooltipProps:m,variant:f="invisible",ariaLabel:x,className:g,disabled:y,...b}){let[v,j]=s.useState(!1),w=(0,a.A)(),C=x??`Copy "${p}" to clipboard`,S=v?"Copied!":C,N={size:t,variant:f,onClick:()=>{j(!0),(0,d.i)("Copied!"),(0,u.D)(p),r?.(),setTimeout(()=>w()&&j(!1),2e3)},icon:v?o.CheckIcon:e,className:(0,l.$)(v?"color-fg-success":void 0,g),...b},R=(0,s.useId)();return y?(0,n.jsx)(i.K,{...N,"aria-label":C,disabled:!0}):(0,n.jsx)(c.m,{text:S,"aria-label":C,type:"label",id:R,"aria-hidden":!0,...m,className:(0,l.$)(h.tooltip,m?.className),children:(0,n.jsx)(i.K,{...N,"aria-labelledby":R})})}try{p.displayName||(p.displayName="CopyToClipboardButton")}catch{}},30876:(e,t,r)=>{r.d(t,{F:()=>S});var n=r(74848),a=r(96540),o=r(55847),i=r(73451),s=r(27331),l=r(17500),c=r(57572),d=r(81112),u=r(26514),h=r(75177),p=r(9591);let m=(0,a.forwardRef)(function({newBranchName:e,setNewBranchName:t},r){return(0,n.jsxs)(i.A,{children:[(0,n.jsx)(i.A.Label,{children:"New branch name"}),(0,n.jsxs)(h.A,{sx:{display:"flex",width:"100%"},children:[(0,n.jsx)(p.A,{block:!0,className:"color-bg-subtle",sx:{borderBottomRightRadius:0,borderTopRightRadius:0,width:"88%"},value:e,onChange:e=>t(e.target.value),ref:r}),(0,n.jsx)(h.A,{className:"color-bg-subtle",sx:{display:"flex",justifyContent:"center",borderRightWidth:1,borderLeftWidth:0,borderTopWidth:1,borderBottomWidth:1,borderTopRightRadius:"10%",borderBottomRightRadius:"10%",borderColor:"border.default",borderStyle:"solid",width:"12%"},children:(0,n.jsx)(u.T,{tooltipProps:{direction:"nw"},textToCopy:e,ariaLabel:"Copy to clipboard",className:"pt-1",sx:{height:25,width:25}})})]})]})});try{m.displayName||(m.displayName="NewBranchName")}catch{}var f=r(85349),x=r(52464),g=r(15385),y=r(38621);function b(e){return`${e.ownerLogin}/${e.name}`}function v({isForkSourceOpen:e,setForkSourceOpen:t,repoSource:r,setRepoSource:i,repository:s,repositoryParent:l,setDefaultBranch:c,setBranchSource:d}){return(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)("span",{className:"note text-small mt-0",children:"Choose from this fork or its upstream repository."}),(0,n.jsx)(f.T,{open:e,overlayProps:{role:"dialog",width:"medium"},onOpen:()=>t(!0),onClose:()=>t(!1),renderAnchor:e=>(0,n.jsx)(o.Q,{...e,trailingVisual:y.TriangleDownIcon,"aria-label":b(r),"data-testid":"anchor-button",children:(0,n.jsxs)(h.A,{sx:{display:"flex"},children:[(0,n.jsx)(h.A,{sx:{mr:1,color:"fg.muted"},children:(0,n.jsx)(y.RepoIcon,{size:"small"})}),(0,n.jsx)(h.A,{sx:{fontSize:1,maxWidth:125,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(0,n.jsxs)(x.A,{sx:{minWidth:0},children:["\xa0",`${b(r)}`]})})]})}),focusZoneSettings:{disabled:!0},children:(0,n.jsx)("div",{"data-testid":"overlay-content",id:"selectPanel",children:(0,n.jsxs)(g.l,{selectionVariant:"single",children:[(0,n.jsx)(g.l.Item,{selected:r.id===l.id,onSelect:()=>{i(l),c(l.defaultBranch),d(l.defaultBranch),t(!1)},children:`${l.ownerLogin}/${l.name}`}),(0,n.jsx)(g.l.Item,{selected:r.id===s.id,onSelect:()=>{i(s),c(s.defaultBranch),d(s.defaultBranch),t(!1)},children:`${s.ownerLogin}/${s.name}`})]})})})]})}try{v.displayName||(v.displayName="ForkPicker")}catch{}var j=r(99425),w=r(84976);function C({channel:e="",onUpdate:t}){let[,r]=(0,w.ok)(),n=(0,a.useCallback)(e=>{t(e),r(t=>(t.set("branch_event",encodeURIComponent(e.reason)),t))},[t,r]);return(0,j.x)(e,n),null}try{C.displayName||(C.displayName="LiveBranches")}catch{}function S({branchListCacheKey:e,repository:t,repositoryParent:r,createUrl:u,helpUrl:h,liveReload:p}){let[f,x]=(0,a.useState)(!1),[g,y]=(0,a.useState)(t.defaultBranch),[b,j]=(0,a.useState)(t.defaultBranch),[w,S]=(0,a.useState)(""),[N,R]=(0,a.useState)(t),[T,A]=(0,a.useState)(!1),[_,B]=(0,a.useState)(void 0),[L,k]=(0,a.useState)(void 0),[I,P]=(0,a.useState)(!1),[F,M]=(0,a.useState)(!1),[H,$]=(0,a.useState)(void 0),O=(0,a.useRef)(null),D=(0,a.useRef)(null);function E(){B(void 0),k(void 0),S(""),P(!1)}async function U(){if(!F){M(!0);let e=new FormData;e.append("name",w),e.append("branch",b),r&&e.append("repo",N.id.toString()),e.append("send_response_as_json","true");let t=await (0,c.DI)(u,{method:"post",body:e,headers:{Accept:"application/json"}}),n=await t.json();if(t.ok)E(),x(!1),p&&n.channel?$(n.channel):window.location.reload();else{let e=n.error;e?.includes("Repository rule violations found")?(k(void 0),B(e.replace("Repository rule violations found","").trim().split("\n\n").slice(0,3))):e&&(B(void 0),k(e.trim()))}M(!1)}}return(0,a.useEffect)(()=>{f&&requestAnimationFrame(()=>D.current?.focus())},[f]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Q,{ref:O,variant:"primary",className:"ml-3",onClick:()=>{E(),x(!0)},children:"New branch"}),f&&(0,n.jsx)(s.l,{title:"Create a branch",width:"large",onClose:()=>{x(!1),E()},returnFocusRef:O,footerButtons:I?[]:[{content:"Cancel",buttonType:"normal",onClick:()=>{x(!1),E()}},{content:"Create new branch",buttonType:"primary",onClick:U}],children:(0,n.jsxs)(n.Fragment,{children:[(_||L)&&(0,n.jsx)(d.r,{prefix:"Unable to create branch:",errorMessageUsingPrefix:_?"Please address the rule violations and try again.":void 0,errorMessageNotUsingPrefix:L,ruleErrors:_,helpUrl:h}),(0,n.jsx)("form",{onSubmit:e=>{e.preventDefault(),U()},children:(0,n.jsx)(m,{newBranchName:w,setNewBranchName:S,ref:D})}),(0,n.jsx)("div",{className:"mt-3",children:(0,n.jsxs)(i.A,{children:[(0,n.jsx)(i.A.Label,{className:"mb-0",children:"Source"}),r&&(0,n.jsx)(v,{isForkSourceOpen:T,setForkSourceOpen:A,repoSource:N,setRepoSource:R,repository:t,repositoryParent:r,setDefaultBranch:y,setBranchSource:j}),(0,n.jsx)(l.PI,{currentCommitish:b,defaultBranch:g,owner:N.ownerLogin,repo:N.name,canCreate:!1,cacheKey:e,selectedRefType:"branch",onSelectItem:e=>j(e),closeOnSelect:!0,types:["branch"],hideShowAll:!0})]})})]})}),H?(0,n.jsx)(C,{channel:H,onUpdate:()=>$(void 0)}):null]})}try{S.displayName||(S.displayName="CreateBranchButton")}catch{}},81112:(e,t,r)=>{r.d(t,{r:()=>d});var n=r(74848),a=r(38621),o=r(6869),i=r(34614),s=r(75177),l=r(30729),c=r(44968);function d({prefix:e,errorMessageUsingPrefix:t,errorMessageNotUsingPrefix:r,hideRuleErrorsTitle:d,ruleErrors:u,helpUrl:h,flashRef:p}){let m=(u?.length||0)>0;return t||r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.A,{id:"flash",variant:"danger",className:"d-flex flex-items-center flex-justify-between",sx:{marginBottom:3},tabIndex:-1,ref:p,children:t?(0,n.jsxs)("div",{children:[e," ",(0,n.jsx)(c.yx,{sx:{fontWeight:"bold"},unverifiedHTML:t}),m&&h&&(0,n.jsx)(i.A,{href:`${h}/repositories/configuring-branches-and-merges-in-your-repository/managing-rulesets/about-rulesets`,sx:{marginLeft:1},children:"Learn more about rulesets."})]}):r&&(0,n.jsx)("div",{children:r})}),m&&(0,n.jsxs)(s.A,{sx:{marginBottom:3},children:[!d&&(0,n.jsx)(s.A,{sx:{fontWeight:"bold",marginBottom:1},children:"Repository rule violations found:"}),u?.map(e=>n.jsxs(s.A,{sx:{display:"flex",alignItems:"center"},children:[n.jsx(l.A,{icon:a.XCircleFillIcon,size:16,sx:{color:"danger.fg"}}),n.jsx(s.A,{sx:{marginLeft:2},children:e})]},e))]})]}):null}try{d.displayName||(d.displayName="FlashError")}catch{}},44968:(e,t,r)=>{r.d(t,{mo:()=>p,oG:()=>d,yx:()=>u});var n,a=r(74848),o=r(75177),i=r(52464),s=r(99418),l=r(96540);function c(e){if("html"in e&&void 0!==e.html){let{html:t,...r}=e;return{safeHTML:t,props:r}}let{unverifiedHTML:t,unverifiedHTMLConfig:r,...n}=e,a={...r,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1};return{safeHTML:s.default.sanitize(t,a),props:n}}let d=h(o.A);d.displayName="SafeHTMLBox";let u=h(i.A);function h(e){return(0,l.forwardRef)((t,r)=>{let{safeHTML:n,props:o}=c(t);return(0,a.jsx)(e,{ref:r,...o,dangerouslySetInnerHTML:n?{__html:n}:void 0})})}u.displayName="SafeHTMLText";let p=(0,l.forwardRef)((e,t)=>{let{safeHTML:r,props:n}=c(e);return(0,a.jsx)("div",{ref:t,...n,dangerouslySetInnerHTML:r?{__html:r}:void 0})});p.displayName="SafeHTMLDiv";try{(n=SafeHTMLComponent).displayName||(n.displayName="SafeHTMLComponent")}catch{}}}]);
//# sourceMappingURL=ui_packages_use-client-value_use-client-value_ts-ui_packages_create-branch-button_CreateBranc-846e82-503f12472162.js.map